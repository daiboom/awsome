#!/bin/sh
#
# 브랜치 네이밍 컨벤션 검사
# 형식: feature/*, bugfix/*, hotfix/*, release/*
#

# 현재 브랜치 이름 가져오기
BRANCH=$(git rev-parse --abbrev-ref HEAD)

# main, develop, master 브랜치는 허용
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "develop" ] || [ "$BRANCH" = "master" ]; then
    echo "✅ 메인 브랜치: $BRANCH"
    exit 0
fi

# 브랜치 네이밍 패턴 검사
# feature/*, bugfix/*, hotfix/*, release/* 형식만 허용
case "$BRANCH" in
    feature/*|bugfix/*|hotfix/*|release/*)
        echo "✅ 브랜치 네이밍 컨벤션 준수: $BRANCH"
        exit 0
        ;;
    *)
        echo "❌ 브랜치 네이밍 컨벤션 위반!"
        echo ""
        echo "현재 브랜치: $BRANCH"
        echo ""
        echo "올바른 브랜치 네이밍 형식:"
        echo "  - feature/기능명"
        echo "  - bugfix/버그명"
        echo "  - hotfix/수정명"
        echo "  - release/버전번호"
        echo ""
        echo "예시:"
        echo "  - feature/user-pagination"
        echo "  - bugfix/user-id-missing"
        echo "  - hotfix/security-patch"
        echo "  - release/1.0.0"
        echo ""
        exit 1
        ;;
esac

